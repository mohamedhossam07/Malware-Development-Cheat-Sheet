#include <windows.h>
#include <iostream>
#include <string>

using namespace std;

int main (){

int pidnum ;
string dllpath = "C:\\injected.dll";
cout << "Enter victim PID : ";
cin >> pidnum ;
char dll[sizeof(dllpath)];
	int i;
	for (i = 0; i < sizeof(dllpath); i++) {
		dll[i] = dllpath[i];
	}

HANDLE proc = OpenProcess ( PROCESS_ALL_ACCESS, false, (DWORD)pidnum);
LPVOID paddr = VirtualAllocEx( proc, NULL, sizeof(dll), MEM_COMMIT, PAGE_EXECUTE_READ );
WriteProcessMemory(proc, paddr ,dll , sizeof(dll), NULL);
PTHREAD_START_ROUTINE pthreadStart = (PTHREAD_START_ROUTINE) GetProcAddress(GetModuleHandle("Kernel32.dll"),"LoadLibraryA");
HANDLE pthread = CreateRemoteThread(proc, NULL, 0, pthreadStart, paddr, 0, NULL);

return 0;
}
